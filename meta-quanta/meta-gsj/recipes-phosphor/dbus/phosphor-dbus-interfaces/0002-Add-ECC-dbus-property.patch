From b7ee059d3ceed763135fcb72025bc6cfe837bb4e Mon Sep 17 00:00:00 2001
From: will <will.liang@quantatw.com>
Date: Fri, 12 Apr 2019 08:49:07 +0800
Subject: [PATCH] Add ECC dbus property

---
 xyz/openbmc_project/Memory/MemoryECC.errors.yaml   |  8 +++++
 .../Memory/MemoryECC.interface.yaml                | 38 ++++++++++++++++++++++
 2 files changed, 46 insertions(+)
 create mode 100644 xyz/openbmc_project/Memory/MemoryECC.errors.yaml
 create mode 100644 xyz/openbmc_project/Memory/MemoryECC.interface.yaml

diff --git a/xyz/openbmc_project/Memory/MemoryECC.errors.yaml b/xyz/openbmc_project/Memory/MemoryECC.errors.yaml
new file mode 100644
index 0000000..9c2f4b9
--- /dev/null
+++ b/xyz/openbmc_project/Memory/MemoryECC.errors.yaml
@@ -0,0 +1,8 @@
+- name: isLoggingLimitReached
+  description: ECC collection limit is reached.
+
+- name: ceCount
+  description: Correctable ECC/other correctable memory error.
+
+- name: ueCount
+  description: Uncorrectable ECC/other uncorrectable memory error.
\ No newline at end of file
diff --git a/xyz/openbmc_project/Memory/MemoryECC.interface.yaml b/xyz/openbmc_project/Memory/MemoryECC.interface.yaml
new file mode 100644
index 0000000..cb887ad
--- /dev/null
+++ b/xyz/openbmc_project/Memory/MemoryECC.interface.yaml
@@ -0,0 +1,38 @@
+description: >
+    Implement to provide memory ECC attributes.
+properties:
+    - name: isLoggingLimitReached
+      type: boolean
+      description: >
+          The item is ECC logging reach limits.
+    - name: ceCount
+      type: int64
+      description: >
+          The item a correctable ECC event has been detected on a read operation.
+    - name: ueCount
+      type: int64
+      description: >
+          The item a uncorrectable ECC event has been detected on a read operation.
+    - name: state
+      type: enum[self.ECCStatus]
+      default: ok
+      description: >
+          The state is descripted for ECC status.
+
+enumerations:
+   - name: ECCStatus
+     description: >
+       The operaing system statuses.
+     values:
+       - name: ok
+         description: >
+           There is no ECC error occurred.
+       - name: CE
+         description: >
+           correctable ECC detected.
+       - name: UE
+         description: >
+           uncorrectable ECC detected.
+       - name: LogFull
+         description: >
+           ECC logging reach limits.
\ No newline at end of file
-- 
2.7.4

